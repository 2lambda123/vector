features:
- e2e-tests-datadog

test: "e2e"

runner:
  env:
    EXPECTED_LOG_EVENTS: '1000'
    VECTOR_RECEIVE_PORT: '8081'
    FAKE_INTAKE_AGENT_ENDPOINT: 'http://fakeintake-agent:80'
    FAKE_INTAKE_VECTOR_ENDPOINT: 'http://fakeintake-agent-vector:80'

matrix:
  version: [latest]

# changes to these files/paths will invoke the integration test in CI
# expressions are evaluated using https://github.com/micromatch/picomatch
paths:
- "src/common/datadog.rs"
- "src/sources/datadog_agent/**"
- "src/internal_events/datadog_*"
- "src/sinks/datadog/logs/**"
- "src/sinks/util/**"
- "scripts/integration/datadog-e2e/logs/**"
- "tests/data/e2e/datadog/logs/**"
